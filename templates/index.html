<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JD Analyzer ‚Äî Powered by Groq AI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="index-page">

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-inner">
      <div class="nav-brand">
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="28" height="28" rx="8" fill="#1560BD"/>
          <path d="M8 8h7a5 5 0 010 10H8V8z" fill="white" opacity="0.9"/>
          <rect x="8" y="20" width="12" height="2" rx="1" fill="white" opacity="0.6"/>
        </svg>
        <span class="brand-name">JD Analyzer</span>
      </div>
      <span class="gemini-pill">‚ö° Groq AI</span>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-tag">AI-Powered ¬∑ Instant ¬∑ Comprehensive</div>
      <h1 class="hero-title">
        Analyze Any Job Description
        <span class="hero-accent">in Seconds</span>
      </h1>
      <p class="hero-subtitle">
      Paste a job description and get deep insights on clarity, inclusivity,
        structure, tone, and requirements ‚Äî powered by Groq AI.
      </p>
    </div>
  </section>

  <!-- Form -->
  <main class="main-content">

    {% if error %}
    <div class="alert alert-error" role="alert">
      <svg width="18" height="18" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="9" stroke="#DC2626" stroke-width="1.5"/><path d="M10 6v4M10 14h.01" stroke="#DC2626" stroke-width="1.5" stroke-linecap="round"/></svg>
      {{ error }}
    </div>
    {% endif %}

    <div class="form-card">
      <div class="form-card-header">
        <h2 class="form-card-title">Paste Your Job Description</h2>
        <p class="form-card-hint">Works best with full JDs (100+ words)</p>
      </div>

      <form action="/analyze" method="POST" id="analyze-form">
        <div class="field">
          <textarea
            name="job_description"
            id="jd-textarea"
            class="jd-textarea"
            placeholder="e.g. We are looking for a Senior Software Engineer to join our platform team. You will be responsible for designing, building, and scaling our core APIs..."
            required
            minlength="50"
          >{{ prev_jd or '' }}</textarea>
          <div class="char-counter">
            <span id="char-count">0</span> characters
          </div>
        </div>

        <button type="submit" class="btn-analyze" id="submit-btn">
          <span class="btn-label">Analyze with Groq</span>
          <svg class="btn-arrow" width="18" height="18" viewBox="0 0 20 20" fill="none">
            <path d="M4 10h12M11 5l5 5-5 5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </form>
    </div>

    <!-- Dimensions -->
    <div class="dimensions-bar">
      <div class="dimension">
        <span class="dim-icon">‚úçÔ∏è</span>
        <span class="dim-label">Clarity</span>
      </div>
      <div class="dimension">
        <span class="dim-icon">ü§ù</span>
        <span class="dim-label">Inclusivity</span>
      </div>
      <div class="dimension">
        <span class="dim-icon">üìã</span>
        <span class="dim-label">Structure</span>
      </div>
      <div class="dimension">
        <span class="dim-icon">üí¨</span>
        <span class="dim-label">Tone</span>
      </div>
      <div class="dimension">
        <span class="dim-icon">‚úÖ</span>
        <span class="dim-label">Requirements</span>
      </div>
    </div>

  </main>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay hidden" aria-live="polite">
    <div class="loading-card">
      <div class="loading-spinner"></div>
      <p class="loading-title">Analyzing with Groq AI</p>
      <p class="loading-sub">Getting comprehensive insights‚Ä¶</p>
    </div>
  </div>

  <script>
    // Character counter
    const textarea = document.getElementById('jd-textarea');
    const counter  = document.getElementById('char-count');
    function updateCount() { counter.textContent = textarea.value.length; }
    textarea.addEventListener('input', updateCount);
    updateCount();

    // Loading overlay on submit
    document.getElementById('analyze-form').addEventListener('submit', function () {
      document.getElementById('loading-overlay').classList.remove('hidden');
      document.getElementById('submit-btn').disabled = true;
    });
  </script>
</body>
</html>
